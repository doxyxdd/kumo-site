---
import Layout from "~/layouts/Layout.astro";
import lilyWoozy from "~/assets/lily-woozy.png";
import lilyPls from "~/assets/lily-pls.gif";
import { Image } from "astro:assets";
import "~/styles/hero-patterns.css";

const startSongText = "TRY CLICKING ME!";
const stopSongText = "LET'S FREAKING GO!!!";

const lilySocials = [
  { name: 'simple-icons--x', link: 'https://twitter.com/lilyhops' },
  { name: "simple-icons--twitch", link: "https://www.twitch.tv/lilyhops" },
  { name: "simple-icons--youtube", link: "https://www.youtube.com/channel/UCeofN9seUXFuOunDwTUQBPw" },
]

const giru = {
  tweet: "https://x.com/GiruteaCafe/status/1922534122095862260",
  img: "https://pbs.twimg.com/media/Gq42mFCbcAArIe6?format=jpg&name=900x900",
  socials: [
    { name: "simple-icons--x", link: "https://x.com/GiruteaCafe" },
    { name: "simple-icons--twitch", link: "https://twitch.tv/Girutea" },
    { name: "simple-icons--patreon", link: "https://patreon.com/Girutea" },
  ],
};
---

<Layout styles="death-star-bg p-8">
  <div
    class="min-h-80% bg-white mx-auto overflow-auto rounded-2xl p-8 text-black shadow-xl max-w-3xl"
  >
    <!-- Quote Block -->
    <section class="shrink-2 mb-4 shadow-sm bg-lily-linen rounded-2xl p-2">
      <p class="text-sm font-mono">
        This is a placeholder until Lily thinks of an amazing quote!!! Tempor
        adipisicing reprehenderit nostrud magna. Quis laboris irure officia
        magna pariatur ullamco fugiat cupidatat aute sit. Anim incididunt
        occaecat incididunt esse veniam commodo do duis sit.
      </p>
      <span class="italics font-kalam mr-8 block text-right text-lily-green">- Miss Lily Hopkins</span>
    </section>
    <h2 class="text-2xl font-kalam p-2">Lily Hopkins</h2>
    <div class="flex max-w-full flex-col md:flex-row items-center justify-center md:flex-wrap gap-4">
      <p class="p-2 text-base">
        Lily Hopkins is a fellow little sister VTuber and friend of Kumogorogoro. Lily is known for her ASMR, gaming streams, and her beautiful renditions of Quizno's "We Love The Subs".
        Lily and Kumo's first collab was in May 2025 where they played the game Grounded. If you haven't checked out Miss Lily Hopkins, you should go do it. NOW.
      </p>
      <!-- Dance and Socials Section -->
      <section class="flex flex-col justify-around items-center self-stretch">
        <div class="p-2 flex flex-col justify-evenly items-center">
          <h3 class="font-kalam text-xl">Check out Miss Lily Hopkins</h3>
          <div class="flex">
            {lilySocials.map(social => (
              <a href={social.link} class="size-10 p-1 hover:outline-1 rounded-md hover:outline-lily-green">
                <span class:list={[
                  social.name,
                  "iconify aspect-square size-full text-lily-green mx-auto"
                ]}></span>
              </a>
            ))}
          </div>
        </div>
        <!-- Dance Button -->
        <button
          id="jam"
          class="font-kalam m-2 flex shrink-1 items-center gap-2 rounded-3xl bg-lily-pear p-4 text-2xl drop-shadow-xl drop-shadow-lily-green h-fit border-lily-blue border-2 md:mb-8 mb-4"
        >
          <Image
            id="dance"
            src={lilyPls}
            alt="lily dance"
            class="hidden aspect-square size-16 animate-bounce"
          />
          <Image
            id="woozy"
            src={lilyWoozy}
            alt="lily woozy"
            class="block aspect-square size-16"
          />
          <span
            id="jamText"
            class="mt-2 animate-pulse"
            data-paused={startSongText}
            data-playing={stopSongText}>{startSongText}</span
          >
        </button>
      </section>
      <!-- KGG it's Tuesday Block -->
      <figure class="grow-0 shrink-0 max-w-sm md:basis-1/3 shadow-sm p-2 rounded bg-lily-linen mt-4 md:mt-0">
        <a href={giru.tweet} title="Go to GiruTea's tweet">
          <Image
            src={giru.img}
            inferSize
            class="max-h-96 h-full object-contain rounded-2xl"
            alt="Meme of Kumo looking exhausted and saying 'what a week'. Lily replies that it's only tuesday, kumogorogoro."
          />
        </a>
        <figcaption class="text-slate-700 text-xs pt-1">
          <p class="text-center font-kalam">Artist: GiruTea</p>
          <div class="flex justify-center gap-2">
            {giru.socials.map(social => (
              <a href={social.link} class="size-10 p-1 hover:outline-1 rounded-md hover:outline-lily-green">
                <span class:list={[social.name, "iconify aspect-square size-full text-lily-blue mx-auto"]}></span>
              </a>
            ))}
          </div>
        </figcaption>
      </figure>
    </div>

    <div class="mt-4">
      <h3 class="font-kalam p-4 text-2xl">Clips of kgg and lily</h3>
      <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 sm:gap-12 px-8">
        <iframe
          class="aspect-shorts size-full max-h-md"
          src="https://www.youtube-nocookie.com/embed/idYJ70wMZ18"
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
        <iframe
          class="aspect-shorts size-full"
          src="https://www.youtube-nocookie.com/embed/UqISdX4XqI4"
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
        <iframe
          class="aspect-shorts size-full"
          src="https://www.youtube-nocookie.com/embed/SdpvfV2lBR4"
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
        <iframe
          class="aspect-shorts size-full"
          src="https://www.youtube-nocookie.com/embed/xwKzCH1XwVc"
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
      </div>
    </div>
    <!-- Soundcloud -->
    <div
      id="soundcloud-wrapper"
      class="fixed right-1 bottom-0 left-1 hidden md:right-1/10 md:left-1/10"
    >
      <button
        id="close"
        class="absolute top-0 right-0 size-12 rounded-3xl bg-white"
        ><span class="iconify line-md--close-circle size-full bg-green-500"
        ></span></button
      >
      <div
        style="font-size: 12px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"
      >
        <iframe
          class="mt-8"
          id="soundcloud"
          width="100%"
          height="166"
          scrolling="no"
          frameborder="no"
          allow="autoplay"
          src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1187015824&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"
        ></iframe>
      </div>

      <script is:inline src="https://w.soundcloud.com/player/api.js"></script>

      <script>
        let iframe = document.getElementById("soundcloud");
        let soundcloudWrapper = document.getElementById("soundcloud-wrapper");
        let song = SC.Widget(iframe);
        let button = document.getElementById("jam");
        let closeButton = document.getElementById("close");
        let woozy = document.getElementById("woozy");
        let dance = document.getElementById("dance");
        let playBtnText = document.getElementById("jamText");

        function stopSong() {
          if (!soundcloudWrapper || !woozy || !playBtnText || !dance) {
            return;
          }
          song.pause();
          song.seekTo(0);
          soundcloudWrapper.classList.add("hidden");
          soundcloudWrapper.classList.remove("block");
          woozy.classList.add("block");
          woozy.classList.remove("hidden");
          dance.classList.add("hidden");
          dance.classList.remove("block");
          button?.classList.add("bg-green-400");
          button?.classList.remove("animate-bg-rainbow");
          playBtnText.innerText = playBtnText.dataset.paused || "";
        }

        function startSong() {
          if (!soundcloudWrapper || !woozy || !playBtnText || !dance) {
            return;
          }
          soundcloudWrapper.classList.add("block");
          soundcloudWrapper.classList.remove("hidden");
          song.play();
          woozy.classList.remove("block");
          woozy.classList.add("hidden");
          dance.classList.add("block");
          dance.classList.remove("hidden");
          button?.classList.remove("bg-green-900");
          button?.classList.add("animate-bg-rainbow");
          playBtnText.innerText = playBtnText.dataset.playing || "";
        }

        closeButton?.addEventListener("click", () => {
          stopSong();
        });

        button?.addEventListener("click", () => {
          if (soundcloudWrapper?.classList.contains("hidden")) {
            startSong();
          } else {
            stopSong();
          }
        });
      </script>
    </div>
  </div>
</Layout>
